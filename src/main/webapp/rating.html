<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/writeHead.js"></script>
    <link rel="stylesheet" type="text/css" href="css/rating.css">

    <title>Rating Prototype</title>
</head>

<body>
    This page has no content.
    <br>
    <button type="button" id="rate_button">RATE</button>

    <div id="popup">
        <tr class="row">
            <td class="col-sm-3"></td>
            <td class="col-sm-3">
                <tr>
                    <td>
                        <input type="range" id="rating" min="0" max="10" step=".01">
                    </td>
                </tr>
                <!--textarea cols="25" rows="7" id="review"></textarea-->
            </td>
            <td class="col-sm-3">
                X
                <!--div id="close">X</div-->
                <!--div id="toggle">Something</div-->
            </td>
            <td class="col-sm-3">
                X
                <!--div id="close">X</div-->
                <!--div id="toggle">Something</div-->
            </td>
        </tr>
    </div>

    <div id="result"></div>

    <script>
        var shown = false, down = false;
	var content;

	function getContent() {
	    return content;	
	}

	function setContent(new_content) {
	    content = new_content;
	}

        $(document).ready(function() {
            $("#rate_button").on("click", function(){
                if (shown) {
                    $("#popup").css("display", "none");
                    shown = false;
                } else {
                    $("#popup").css("display", "block");
                    shown = true;
                }
            });
/*
            $("#rating").on("mousedown", function(mouse) {
                var percent = (mouse.pageX - $(this).offset().left) * 100 / $("#rating").width();
                $("#rating2").css("width", "" + percent + "%");
            });

            $("#rating").on("mouseup", function(mouse) {
                var percent = (mouse.pageX - $(this).offset().left) * 100 / $("#rating").width();
                $("#rating2").css("width", "" + percent + "%");
            });
*/
            var rating = $("#rating"), rating_interval;
            rating.on("mousedown", function() {
                var max = rating.attr("max");
                rating_interval = setInterval(function() {
                    var val = rating.val() / max;
                    $("#result").text(val);
                }, 500);
            }).on("mouseup", function() {
                clearInterval(rating_interval);
            });

            $("#save").on("click", function() {
                if ($("#review").val() == "") {
                    $("#rate_review").css("display", "none");
                    shown = false;
                    $("#result").text("CLOSED");
                } else {
                    $("#rate_review").css("display", "none");
                    shown = false;
                    $("#result").text("SUBMITTED");
                }
            });
        });


  </script>
</body>

</html>
