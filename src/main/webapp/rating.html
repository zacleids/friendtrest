<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
    <link rel="stylesheet" type="text/css" href="css/rating.css">

    <title>Rating Prototype</title>
</head>

<body>
    This page has no content.
    <br>
    <button type="button" id="rate_button">RATE</button>

    <div id="rate_review">
        <input type="range" id="rating" min="0" max="10" step=".01">
        <br>
        <textarea cols="43" rows="10" id="review"></textarea>
        <button type="button" id="save">SAVE</button>
    </div>

    <div id="result"></div>

    <script>
        var shown = false, down = false;
	var content;

	function getContent() {
	    return content;	
	}

	function setContent(new_content) {
	    content = new_content;
	}

        $(document).ready(function() {
            $("#rate_button").on("click", function(){
                if (shown) {
                    $("#rate_review").css("display", "none");
                    shown = false;
                } else {
                    $("#rate_review").css("display", "block");
                    shown = true;
                }
            });
/*
            $("#rating").on("mousedown", function(mouse) {
                var percent = (mouse.pageX - $(this).offset().left) * 100 / $("#rating").width();
                $("#rating2").css("width", "" + percent + "%");
            });

            $("#rating").on("mouseup", function(mouse) {
                var percent = (mouse.pageX - $(this).offset().left) * 100 / $("#rating").width();
                $("#rating2").css("width", "" + percent + "%");
            });
*/
            var rating = $("#rating"), rating_interval;
            rating.on("mousedown", function() {
                var max = rating.attr("max");
                rating_interval = setInterval(function() {
                    var val = rating.val() / max;
                    $("#result").text(val);
                }, 500);
            }).on("mouseup", function() {
                clearInterval(rating_interval);
            });

            $("#save").on("click", function() {
                if ($("#review").val() == "") {
                    $("#rate_review").css("display", "none");
                    shown = false;
                    $("#result").text("CLOSED");
                } else {
                    $("#rate_review").css("display", "none");
                    shown = false;
                    $("#result").text("SUBMITTED");
                }
            });
        });


  </script>
</body>

</html>
